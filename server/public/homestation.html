<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="http://178.128.113.184:8081/public/" target="_parent" />
    <link rel="stylesheet" href="style/homestation.css" />
    <link rel="shortcut icon" href="img/logo-web.png" />
    <title>TB NET - Station</title>
    <!-- <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script> -->
  </head>
  <body>
    <div class="header-table">
      <h1 id="device_id"></h1>
      <div class="button-logout">
        <button class="custom-button-fill" id="logoutButton">
          <span class="button-fill-text">Logout</span>
        </button>
      </div>
    </div>
    <div class=""></div>
    <div class="header-button-connect">
      <p id="server_time"></p>
      <div class="button-connect">
        <button class="custom-button-connect-fill">
          <span class="button-connect-fill-text">Xem thông số</span>
        </button>
      </div>
      <div class="button-connect">
        <button class="custom-button-connect-fill">
          <span class="button-connect-fill-text">Điều khiển</span>
        </button>
      </div>
    </div>

    <script>
      var device_id = localStorage.getItem("device_id");

      device_id.innerHTML = localStorage.getItem("device_id");
      //   let socket = io("http://178.128.113.184");
      //   var device_id = localStorage.getItem("device_id");
      //   let status_currentcontrol = 0;

      //   //Socket server to client
      //   socket.on("time", (timeString) => {
      //     let el = document.getElementById("server_time");
      //     el.innerHTML = "Server time " + timeString;
      //   });
      //   socket.on(device_id + "/control", (newValue) => {
      //     handleData(newValue.payload);
      //   });

      //Get data for the first load
      //   getData = async () => {
      //     axios
      //       .get("http://178.128.113.184/stations/" + device_id, {
      //         headers: { "auth-token": localStorage.getItem("auth-token") },
      //       })
      //       .then((response) => {
      //         if (response.data === false) {
      //           window.location.href = "login.html";
      //         }
      //         let lastValue = response.data.lastValue;
      //         let status_currentcontrol = response.data.status_currentcontrol;
      //         let device_id = document.getElementById("device_id");
      //         device_id.innerHTML = localStorage.getItem("device_id");
      //         handleStatusControl(status_currentcontrol);
      //         handleData(lastValue);
      //       })
      //       .catch((error) => {
      //         if (error) {
      //           console.log(error);
      //         } else {
      //           console.log(error.message);
      //         }
      //       });
      //   };
      //   getData();

      //logout
      //   var logoutButton = document.getElementById("logoutButton");
      //   logoutButton.addEventListener("click", () => {
      //     localStorage.removeItem("auth-token");
      //     window.location.href = "index.html";
      //   });
    </script>
  </body>
</html>
